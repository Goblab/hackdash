extends layout

block content

  

  .row-fluid.projects#projects
    each project, index in projects
      .project.well(data-contribs=project.contributors.length, data-name=project.title, data-date=("undefined" == typeof project.created_at) ? 0 : project.created_at)
        if(user.username == "blejman")
          a(href="/projects/remove/"+project.id, style="float:right") x
        h3.title 
          a(href="/p/" + project.id) #{project.title}
        p
          //strong
            a(href="https://twitter.com/" + project.owner_username, target="_blank") (@#{project.owner_username}) 
          - if(user && project.owner_id == user.id){
            a.edit(href="/projects/edit/" + project.id) Editar proyecto (#{project.pending.length})
          - } else if(user && project.contributors.indexOf(user.username) !== -1){
            a.join(href="/projects/leave/" + project.id) Abandonar proyecto
          - } else if(user && project.pending.indexOf(user.username) !== -1){
            a.join(href="/projects/leave/" + project.id) Pendiente de aprobaci√≥n
          - } else {
            a.join(href="/projects/join/" + project.id) Unirte al proyecto
          - }
        p.description
          | #{project.description.replace('\n', '<br />')}
        
        p
            each link, index in project.links
              -link = link.replace(' ','')
              if(index != project.links.length - 1)
                a(href=link.replace(/^[^hH]ttp/, 'http://$&'), target="blank")= link
                |  | 
              else 
                a(href=link.replace(/^[^hH]ttp/, 'http://$&'), target="blank")= link
 


        ul.users
          each contrib, i in project.contributors
            li
              a(href="https://twitter.com/" + contrib, target="_blank") 
                if(i == 0)
                  strong
                    span @#{contrib}
                else
                  span @#{contrib}

  #newProject.modal.hide
    form.form-horizontal(action="/projects/new", method="POST")
      fieldset
        legend Crear proyecto
        .control-group
          label.control-label(for="title") Titulo
          .controls
            input(class="input-xlarge", type="text", name="title", id="title")

        .control-group
          label.control-label(for="description") Description
          .controls
            textarea(class="input-xlarge", id="description", name="description", rows="3", maxlength="400")

       .control-group
          label.control-label(for="link") Link
          .controls
            input(class="input-xlarge", type="text", name="link", id="link")

       .control-group
          label.control-label(for="tags") Tags comma separated (,)
          .controls
            input(class="input-xlarge", type="text", name="link", id="link")

      .form-actions
        button.btn.btn-primary(type="submit") Create project
        button.btn.cancel Cancel

  #editProject.modal.hide

  .footer(style="text-align: left; margin-top: 80px;")
    a(href="http://meetupba.hackshackers.com", target="_blank")
      img(src="http://photos4.meetupstatic.com/photos/event/6/8/b/b/global_22346811.jpeg",width="75")
    a(href="https://github.com/hhba/hackdash", target="_blank")
      img(src="https://a248.e.akamai.net/assets.github.com/images/modules/about_page/github_logo.png?1338956357", width="75")


  script()
      window.username = '#{user.username}';
